<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Paper People Weather</title>
<style>
  :root {
    --brand-blue: #005BAA;
    --brand-green: #4CAF50;
    --bg-dark: #121212;
    --text-light: #f5f5f5;
  }
  html, body {
    margin: 0; padding: 0; height: 100%; width: 100%;
    background: var(--bg-dark); color: var(--text-light);
    font-family: 'Arial Black', sans-serif; overflow: hidden;
  }
  .container {
    display: flex; flex-direction: column; align-items: center;
    height: 100%; width: 100%;
  }
  .logo img { max-height: 250px; margin: 0.6em 0; }
  .clock { font-size: 8em; color: var(--brand-blue); margin: 0.1em 0; }
  .day { font-size: 7em; color: var(--brand-green); margin: 0 0 0.2em; }
  .date { font-size: 5em; color: #ccc; margin-bottom: 0.6em; }

  .weather {
    flex: 1;
    width: 100%;
    max-width: 1920px;
    padding: 0 1em 1em;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-sizing: border-box;
  }
  .current {
    display: flex; flex-direction: row; align-items: center; gap: 1em; margin-bottom: 1em;
  }
  .current img { height: 100px; width: 100px; }
  .current-temp { font-size: 4em; }
  .current-desc { font-size: 1.4em; text-transform: capitalize; }

  .forecast {
    display: flex; justify-content: center; gap: 1em; flex-wrap: wrap;
  }
  .daycard {
    background: #1e1e1e;
    border-radius: 8px;
    padding: 0.6em 1em;
    text-align: center;
    min-width: 110px;
  }
  .daycard img { height: 45px; width: 45px; }
  .daycard .label { font-size: 1.2em; margin-top: 0.4em; }
  .daycard .temp { font-size: 1.1em; margin-top: 0.3em; }
</style>
</head>
<body>
  <div class="container">
    <div class="logo"><img src="paper-people-logo.png" alt="The Paper People logo"></div>
    <div class="clock" id="clock">--:--:--</div>
    <div class="day" id="day">Loading…</div>
    <div class="date" id="date">---</div>
    <div class="weather" id="weather"></div>
  </div>

<script>
const API_KEY = "d248158974fe1979c3a22a354fbd204f";
const ZIP = "54428";
const COUNTRY = "US";
const UNITS = "imperial"; // use 'metric' for °C

function updateClock() {
  const now = new Date();
  let h = now.getHours();
  const m = String(now.getMinutes()).padStart(2, '0');
  const s = String(now.getSeconds()).padStart(2, '0');
  const ampm = h >= 12 ? 'PM' : 'AM';
  h = h % 12 || 12;
  document.getElementById('clock').textContent = `${h}:${m}:${s} ${ampm}`;
  const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
  const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  const nowDay = days[now.getDay()];
  const nowDate = `${months[now.getMonth()]} ${now.getDate()}, ${now.getFullYear()}`;
  document.getElementById('day').textContent = nowDay;
  document.getElementById('date').textContent = nowDate;
}
setInterval(updateClock, 1000); updateClock();

async function fetchWeather() {
  try {
    const [currentRes, forecastRes] = await Promise.all([
      fetch(`https://api.openweathermap.org/data/2.5/weather?zip=${ZIP},${COUNTRY}&appid=${API_KEY}&units=${UNITS}`),
      fetch(`https://api.openweathermap.org/data/2.5/forecast?zip=${ZIP},${COUNTRY}&appid=${API_KEY}&units=${UNITS}`)
    ]);
    if (!currentRes.ok || !forecastRes.ok) throw new Error("Weather fetch failed");
    const current = await currentRes.json();
    const forecast = await forecastRes.json();
    renderWeather(current, forecast);
  } catch (e) {
    console.error(e);
    document.getElementById("weather").innerHTML = "<p style='color:red'>Weather data unavailable</p>";
  }
}

function iconUrl(icon) {
  return `https://openweathermap.org/img/wn/${icon}@2x.png`;
}

function renderWeather(current, forecast) {
  const container = document.getElementById("weather");

  const currentHTML = `
    <div class="current">
      <img src="${iconUrl(current.weather[0].icon)}" alt="">
      <div>
        <div class="current-temp">${Math.round(current.main.temp)}°</div>
        <div class="current-desc">${current.weather[0].description}</div>
      </div>
    </div>`;

  // Filter forecast entries to 12:00 PM each day
  const daily = forecast.list.filter(f => f.dt_txt.includes("12:00:00")).slice(0, 5);

  const forecastHTML = daily.map(f => {
    const date = new Date(f.dt * 1000);
    const label = date.toLocaleDateString("en-US", { weekday: "short" });
    return `
      <div class="daycard">
        <div>${label}</div>
        <img src="${iconUrl(f.weather[0].icon)}" alt="">
        <div class="temp">${Math.round(f.main.temp_max)}° / ${Math.round(f.main.temp_min)}°</div>
        <div class="label">${f.weather[0].main}</div>
      </div>`;
  }).join("");

  container.innerHTML = currentHTML + `<div class="forecast">${forecastHTML}</div>`;
}

fetchWeather();
setInterval(fetchWeather, 15 * 60 * 1000); // refresh every 15 min
setTimeout(() => location.reload(), 60 * 60 * 1000); // full reload hourly
</script>
</body>
</html>
